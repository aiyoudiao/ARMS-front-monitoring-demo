{"version":3,"file":"LangSwitch-BWOPyISu.js","sources":["../../src/components/stateless/custom/ButtonIcon.tsx","../../src/components/stateful/ThemeSchemaSwitch.tsx","../../src/components/stateful/LangSwitch.tsx"],"sourcesContent":["import { Button, Tooltip } from 'antd';\nimport type { ButtonProps, TooltipProps } from 'antd';\nimport { type CSSProperties } from 'react';\nimport SvgIcon from './SvgIcon';\n\ninterface Props extends Omit<ButtonProps, 'icon' | 'iconPosition'> {\n  /** Button class */\n  className?: string;\n  /** Iconify icon name */\n  icon?: string;\n  /** Tooltip content */\n  tooltipContent?: string;\n  /** Tooltip placement */\n  tooltipPlacement?: TooltipProps['placement'];\n  zIndex?: number;\n  style?: CSSProperties;\n  /** Trigger tooltip on parent */\n  triggerParent?: boolean;\n  children?: React.ReactNode;\n}\n\n/** - 动态计算class */\nconst computeClass = (className: string) => {\n  let clsStr = className;\n\n  if (!clsStr.includes('h-')) {\n    clsStr += ' h-36px';\n  }\n\n  if (!clsStr.includes('text-')) {\n    clsStr += ' text-icon';\n  }\n\n  return clsStr;\n};\n\n/** - 生成复用的button */\n\nconst ButtonIcon: FC<Props> = memo(\n  ({\n    className = 'h-36px text-icon',\n    icon,\n    tooltipContent,\n    tooltipPlacement = 'bottom',\n    zIndex = 98,\n    style,\n    triggerParent,\n    children,\n    ...rest\n  }) => {\n    const cls = computeClass(className);\n\n    function getPopupContainer(triggerNode: HTMLElement) {\n      return triggerParent ? triggerNode.parentElement! : document.body;\n    }\n\n    return (\n      <Tooltip\n        zIndex={zIndex}\n        title={tooltipContent}\n        placement={tooltipPlacement}\n        getPopupContainer={getPopupContainer}\n      >\n        <Button\n          type=\"text\"\n          className={cls}\n          {...rest}\n        >\n          <div className=\"flex-center gap-8px\">\n            {children || (\n              <SvgIcon\n                style={style}\n                icon={icon}\n              />\n            )}\n          </div>\n        </Button>\n      </Tooltip>\n    );\n  }\n);\n\nexport default ButtonIcon;\n","import type { ButtonProps, TooltipProps } from 'antd';\nimport type { CSSProperties } from 'react';\nimport { getDarkMode, getThemeSettings, toggleThemeScheme } from '@/store/slice/theme';\nimport ButtonIcon from '../stateless/custom/ButtonIcon';\n\ninterface Props {\n  /** Show tooltip */\n  showTooltip?: boolean;\n  /** Tooltip placement */\n  tooltipPlacement?: TooltipProps['placement'];\n  style?: CSSProperties;\n  className?: string;\n}\n\nconst icons: Record<UnionKey.ThemeScheme, string> = {\n  light: 'material-symbols:sunny',\n  dark: 'material-symbols:nightlight-rounded',\n  auto: 'material-symbols:hdr-auto'\n};\n\nlet dark: boolean = false;\nconst DEFAULT_ANIMATION_DURATION = 400;\nconst DEFAULT_ANIMATION_EASING = 'ease-out';\n\nconst ThemeSchemaSwitch: FC<Props> = memo(({ tooltipPlacement = 'bottom', showTooltip = true, ...props }) => {\n  const { t } = useTranslation();\n  const { themeScheme } = useAppSelector(getThemeSettings);\n  const dispatch = useAppDispatch();\n  const darkMode = useAppSelector(getDarkMode);\n\n  const tooltipContent = showTooltip ? t('icon.themeSchema') : '';\n\n  const toggleDark: ButtonProps['onClick'] = event => {\n    const isAppearanceTransition = !window.matchMedia('(prefers-reduced-motion: reduce)').matches;\n\n    if (!isAppearanceTransition) {\n      dispatch(toggleThemeScheme());\n      return;\n    }\n\n    const transition = document.startViewTransition(async () => {\n      dark = dispatch(toggleThemeScheme()) as boolean;\n    });\n    if (dark !== darkMode) return;\n    const x = event.clientX;\n    const y = event.clientY;\n    const endRadius = Math.hypot(Math.max(x, innerWidth - x), Math.max(y, innerHeight - y));\n\n    transition.ready.then(() => {\n      const clipPath = [`circle(0px at ${x}px ${y}px)`, `circle(${endRadius}px at ${x}px ${y}px)`];\n      document.documentElement.animate(\n        {\n          clipPath: darkMode ? [...clipPath].reverse() : clipPath\n        },\n        {\n          duration: DEFAULT_ANIMATION_DURATION,\n          easing: DEFAULT_ANIMATION_EASING,\n          pseudoElement: darkMode ? '::view-transition-old(root)' : '::view-transition-new(root)'\n        }\n      );\n    });\n  };\n  return (\n    <ButtonIcon\n      icon={icons[themeScheme]}\n      tooltipContent={tooltipContent}\n      {...props}\n      tooltipPlacement={tooltipPlacement}\n      onClick={toggleDark}\n    />\n  );\n});\n\nexport default ThemeSchemaSwitch;\n","import { Dropdown } from 'antd';\nimport { changeLocale, getLocale, getLocaleOptions } from '@/store/slice/app';\nimport ButtonIcon from '../stateless/custom/ButtonIcon';\n\ninterface Props {\n  /** Show tooltip */\n  showTooltip?: boolean;\n  className?: string;\n}\n\nconst LangSwitch: FC<Props> = memo(({ showTooltip = true, className }) => {\n  const { t } = useTranslation();\n  const dispatch = useAppDispatch();\n  const locale = useAppSelector(getLocale);\n  const localeOptions = useAppSelector(getLocaleOptions);\n\n  const tooltipContent = showTooltip ? t('icon.lang') : '';\n\n  function changeLocales({ key }: { key: string }) {\n    dispatch(changeLocale(key as App.I18n.LangType));\n  }\n\n  return (\n    <Dropdown menu={{ items: localeOptions, onClick: changeLocales, selectedKeys: [locale] }}>\n      <div>\n        <ButtonIcon\n          tooltipContent={tooltipContent}\n          tooltipPlacement=\"left\"\n          className={className}\n          icon=\"heroicons:language\"\n        />\n      </div>\n    </Dropdown>\n  );\n});\n\nexport default LangSwitch;\n"],"names":["computeClass","className","clsStr","ButtonIcon","memo","icon","tooltipContent","tooltipPlacement","zIndex","style","triggerParent","children","rest","cls","getPopupContainer","triggerNode","jsx","Tooltip","Button","SvgIcon","icons","dark","DEFAULT_ANIMATION_DURATION","DEFAULT_ANIMATION_EASING","ThemeSchemaSwitch","showTooltip","props","t","useTranslation","themeScheme","useAppSelector","getThemeSettings","dispatch","useAppDispatch","darkMode","getDarkMode","toggleDark","event","toggleThemeScheme","transition","x","y","endRadius","clipPath","LangSwitch","locale","getLocale","localeOptions","getLocaleOptions","changeLocales","key","changeLocale","Dropdown"],"mappings":"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"}