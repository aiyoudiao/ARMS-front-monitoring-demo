{"version":3,"file":"index-BJ-bOXY8.js","sources":["../../src/pages/login/pwd-login/index.tsx"],"sourcesContent":["import { Button, Checkbox, Divider, Form, Input, Space } from 'antd';\nimport { loginModuleRecord } from '@/constants/app';\nimport { useLogin } from '@/hooks/common/login';\n\ntype AccountKey = 'super' | 'admin' | 'user';\ninterface Account {\n  key: AccountKey;\n  label: string;\n  userName: string;\n  password: string;\n}\n\ntype LoginParams = Pick<Account, 'userName' | 'password'>;\n\nexport function Component() {\n  const [form] = Form.useForm<LoginParams>();\n  const { toggleLoginModule } = useRouterPush();\n  const { t } = useTranslation();\n  const { loading, toLogin } = useLogin();\n\n  const {\n    formRules: { userName: userNameRules, pwd }\n  } = useFormRules();\n\n  /**\n   * { key: 'super', label: t('page.login.pwdLogin.superAdmin'), userName: 'Super', password: '123456' }, { key:\n   * 'admin', label: t('page.login.pwdLogin.admin'), userName: 'Admin', password: '123456' }, { key: 'user', label:\n   * t('page.login.pwdLogin.user'), userName: 'User', password: '123456' }\n   */\n\n  async function handleSubmit() {\n    const params = await form.validateFields();\n\n    // !NOTE 在登录页注入名字\n    const { userName } = params;\n    window.aliLogger.setConfig({\n      setUsername() {\n        return userName;\n      }\n    });\n\n    toLogin(params);\n  }\n\n  useKeyPress('enter', () => {\n    handleSubmit();\n  });\n\n  function handleAccountLogin(account: Account) {\n    toLogin(account);\n  }\n\n  const accounts: Account[] = [\n    {\n      key: 'super',\n      label: t('page.login.pwdLogin.superAdmin'),\n      userName: 'Super',\n      password: '123456'\n    },\n    {\n      key: 'admin',\n      label: t('page.login.pwdLogin.admin'),\n      userName: 'Admin',\n      password: '123456'\n    },\n    {\n      key: 'user',\n      label: t('page.login.pwdLogin.user'),\n      userName: 'User',\n      password: '123456'\n    }\n  ];\n\n  return (\n    <>\n      <h3 className=\"text-18px text-primary font-medium\">{t('page.login.pwdLogin.title')}</h3>\n      <Form\n        className=\"pt-24px\"\n        form={form}\n        initialValues={{\n          userName: 'Soybean',\n          password: '123456'\n        }}\n      >\n        <Form.Item\n          rules={userNameRules}\n          name=\"userName\"\n        >\n          <Input />\n        </Form.Item>\n\n        <Form.Item\n          rules={pwd}\n          name=\"password\"\n        >\n          <Input.Password autoComplete=\"password\" />\n        </Form.Item>\n        <Space\n          direction=\"vertical\"\n          className=\"w-full\"\n          size={24}\n        >\n          <div className=\"flex-y-center justify-between\">\n            <Checkbox>{t('page.login.pwdLogin.rememberMe')}</Checkbox>\n\n            <Button\n              type=\"text\"\n              onClick={() => toggleLoginModule('reset-pwd')}\n            >\n              {t('page.login.pwdLogin.forgetPassword')}\n            </Button>\n          </div>\n          <Button\n            type=\"primary\"\n            size=\"large\"\n            loading={loading}\n            shape=\"round\"\n            onClick={handleSubmit}\n            block\n          >\n            {t('common.confirm')}\n          </Button>\n          <div className=\"flex-y-center justify-between gap-12px\">\n            <Button\n              className=\"flex-1\"\n              block\n              onClick={() => toggleLoginModule('code-login')}\n            >\n              {t(loginModuleRecord['code-login'])}\n            </Button>\n            <Button\n              className=\"flex-1\"\n              block\n              onClick={() => toggleLoginModule('register')}\n            >\n              {t(loginModuleRecord.register)}\n            </Button>\n          </div>\n          <Divider className=\"!m-0 !text-14px !text-#666\">{t('page.login.pwdLogin.otherAccountLogin')}</Divider>\n          <div className=\"flex-center gap-12px\">\n            {accounts.map(item => {\n              return (\n                <Button\n                  key={item.key}\n                  onClick={() => handleAccountLogin(item)}\n                  type=\"primary\"\n                >\n                  {item.label}\n                </Button>\n              );\n            })}\n          </div>\n        </Space>\n      </Form>\n    </>\n  );\n}\n"],"names":["Component","form","Form","toggleLoginModule","useRouterPush","t","useTranslation","loading","toLogin","useLogin","userNameRules","pwd","useFormRules","handleSubmit","params","userName","useKeyPress","handleAccountLogin","account","accounts","jsxs","Fragment","jsx","Input","Space","Checkbox","Button","loginModuleRecord","Divider","item"],"mappings":"0nBAcO,SAASA,GAAY,CAC1B,KAAM,CAACC,CAAI,EAAIC,EAAK,QAAqB,EACnC,CAAE,kBAAAC,GAAsBC,IACxB,CAAE,EAAAC,GAAMC,IACR,CAAE,QAAAC,EAAS,QAAAC,CAAQ,EAAIC,EAAS,EAEhC,CACJ,UAAW,CAAE,SAAUC,EAAe,IAAAC,CAAI,GACxCC,EAAa,EAQjB,eAAeC,GAAe,CACtB,MAAAC,EAAS,MAAMb,EAAK,iBAGpB,CAAE,SAAAc,CAAa,EAAAD,EACrB,OAAO,UAAU,UAAU,CACzB,aAAc,CACL,OAAAC,CACT,CAAA,CACD,EAEDP,EAAQM,CAAM,CAChB,CAEAE,EAAY,QAAS,IAAM,CACZH,GAAA,CACd,EAED,SAASI,EAAmBC,EAAkB,CAC5CV,EAAQU,CAAO,CACjB,CAEA,MAAMC,EAAsB,CAC1B,CACE,IAAK,QACL,MAAOd,EAAE,gCAAgC,EACzC,SAAU,QACV,SAAU,QACZ,EACA,CACE,IAAK,QACL,MAAOA,EAAE,2BAA2B,EACpC,SAAU,QACV,SAAU,QACZ,EACA,CACE,IAAK,OACL,MAAOA,EAAE,0BAA0B,EACnC,SAAU,OACV,SAAU,QACZ,CAAA,EAGF,OAEIe,EAAA,KAAAC,WAAA,CAAA,SAAA,CAAAC,MAAC,KAAG,CAAA,UAAU,qCAAsC,SAAAjB,EAAE,2BAA2B,EAAE,EACnFe,EAAA,KAAClB,EAAA,CACC,UAAU,UACV,KAAAD,EACA,cAAe,CACb,SAAU,UACV,SAAU,QACZ,EAEA,SAAA,CAAAqB,EAAA,IAACpB,EAAK,KAAL,CACC,MAAOQ,EACP,KAAK,WAEL,eAACa,EAAM,EAAA,CAAA,CACT,EAEAD,EAAA,IAACpB,EAAK,KAAL,CACC,MAAOS,EACP,KAAK,WAEL,SAACW,EAAA,IAAAC,EAAM,SAAN,CAAe,aAAa,WAAW,CAAA,CAC1C,EACAH,EAAA,KAACI,EAAA,CACC,UAAU,WACV,UAAU,SACV,KAAM,GAEN,SAAA,CAACJ,EAAAA,KAAA,MAAA,CAAI,UAAU,gCACb,SAAA,CAACE,EAAA,IAAAG,EAAA,CAAU,SAAEpB,EAAA,gCAAgC,CAAE,CAAA,EAE/CiB,EAAA,IAACI,EAAA,CACC,KAAK,OACL,QAAS,IAAMvB,EAAkB,WAAW,EAE3C,WAAE,oCAAoC,CAAA,CACzC,CAAA,EACF,EACAmB,EAAA,IAACI,EAAA,CACC,KAAK,UACL,KAAK,QACL,QAAAnB,EACA,MAAM,QACN,QAASM,EACT,MAAK,GAEJ,WAAE,gBAAgB,CAAA,CACrB,EACAO,EAAAA,KAAC,MAAI,CAAA,UAAU,yCACb,SAAA,CAAAE,EAAA,IAACI,EAAA,CACC,UAAU,SACV,MAAK,GACL,QAAS,IAAMvB,EAAkB,YAAY,EAE5C,SAAAE,EAAEsB,EAAkB,YAAY,CAAC,CAAA,CACpC,EACAL,EAAA,IAACI,EAAA,CACC,UAAU,SACV,MAAK,GACL,QAAS,IAAMvB,EAAkB,UAAU,EAE1C,SAAAE,EAAEsB,EAAkB,QAAQ,CAAA,CAC/B,CAAA,EACF,QACCC,EAAQ,CAAA,UAAU,6BAA8B,SAAAvB,EAAE,uCAAuC,EAAE,QAC3F,MAAI,CAAA,UAAU,uBACZ,SAAAc,EAAS,IAAYU,GAElBP,EAAA,IAACI,EAAA,CAEC,QAAS,IAAMT,EAAmBY,CAAI,EACtC,KAAK,UAEJ,SAAKA,EAAA,KAAA,EAJDA,EAAK,GAAA,CAOf,EACH,CAAA,CAAA,CACF,CAAA,CAAA,CACF,CACF,CAAA,CAAA,CAEJ"}